#!/bin/sh
# Environment configuration for Aiex release

# Set the release root directory
RELEASE_ROOT="$(cd "$(dirname "$0")/.." && pwd)"
export RELEASE_ROOT

# Create necessary directories
mkdir -p "$RELEASE_ROOT/data/mnesia"
mkdir -p "$RELEASE_ROOT/log"
mkdir -p "$RELEASE_ROOT/tmp"

# Set environment variables
export AIEX_DATA_DIR="$RELEASE_ROOT/data"
export AIEX_LOG_DIR="$RELEASE_ROOT/log"
export AIEX_TMP_DIR="$RELEASE_ROOT/tmp"

# TUI configuration
export AIEX_TUI_PORT="9487"
export AIEX_OTP_HOST="127.0.0.1"

# LLM provider configuration (can be overridden)
export AIEX_OPENAI_API_KEY="${OPENAI_API_KEY:-}"
export AIEX_ANTHROPIC_API_KEY="${ANTHROPIC_API_KEY:-}"

# Clustering (disabled by default for standalone)
export AIEX_CLUSTERING_ENABLED="${AIEX_CLUSTERING_ENABLED:-false}"

# Set Erlang VM options
export RELEASE_DISTRIBUTION="name"
export RELEASE_NODE="aiex@127.0.0.1"